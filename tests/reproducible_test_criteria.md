# μ¬ν„ ν…μ¤νΈ κΈ°μ¤€ (v1)

μ•„λ 3κ°λ” μ΄λ² λ³€κ²½(μ‹¤ν¨ μ•λ¦Ό/λ³µκµ¬, μƒμ„± κ²°κ³Ό λ°”λ΅ ν•™μµ μ§„μ…, ν•™μµ λ¨λ“ κ³Όλ©/λ‹¨μ› μ„ νƒ λ° κ°λ³„ λ¬Έν•­ μμ •)μ λ™μΌ νλ¦„ κ²€μ¦ κΈ°μ¤€μ…λ‹λ‹¤.

## 1) μƒμ„± μ‹¤ν¨ λ³µκµ¬ νλ¦„
λ©ν‘: μƒμ„± μ‹¤ν¨ μ‹ μ—λ¬ λ©”μ‹μ§€μ™€ λ³µκµ¬ μ•΅μ…μ΄ μ¦‰μ‹ λ…Έμ¶λμ–΄μ•Ό ν•λ©°, λ‘ λ²„νΌ λ¨λ‘ λ™μ‘ν•΄μ•Ό ν•λ‹¤.  
μ΅°κ±΄:
- `st.session_state.generation_failure` μ— λ©”μ‹μ§€κ°€ μ΅΄μ¬ν•  κ²ƒ.
- μ‚¬μ΄λ“λ°”μ—μ„ `render_generation_recovery_panel()`κ°€ νΈμ¶λμ–΄ λ²„νΌμ΄ ν‘μ‹λ  κ²ƒ.
ν†µκ³Ό κΈ°μ¤€:
- `λ™μΌ μ΅°κ±΄ μ¬μ‹¤ν–‰` ν΄λ¦­ μ‹ `generation_failure`κ°€ λΉ κ°’μΌλ΅ μ΄κΈ°ν™”λκ³  μ•±μ΄ λ‹¤μ‹ μ‹¤ν–‰λμ–΄μ•Ό ν•¨.
- `μ•λ¦Ό μ§€μ°κΈ°` ν΄λ¦­ μ‹ `generation_failure`κ°€ λΉ κ°’μΌλ΅ μ΄κΈ°ν™”λμ–΄ λ”μ΄μƒ μ•λ¦Όμ΄ ν‘μ‹λμ§€ μ•μ•„μ•Ό ν•¨.

## 2) μƒμ„± λ―Έλ¦¬λ³΄κΈ° β†’ μ¦‰μ‹ μ§„μ… νλ¦„
λ©ν‘: μƒμ„± μ„±κ³µ μ‹ λ―Έλ¦¬λ³΄κΈ° λ°”λ΅ μ•„λμ—μ„ μ‹ν—/ν•™μµμΌλ΅ 1ν΄λ¦­ μ§„μ… κ°€λ¥ν•΄μ•Ό ν•¨.  
μ΅°κ±΄:
- 1κ° μ΄μƒμ μƒμ„± κ²°κ³Όκ°€ λ°ν™λμ–΄ μ €μ¥λ  κ²ƒ.
- `start_exam_session_from_items()` κ°€ νΈμ¶ κ°€λ¥ν• κ²°κ³Ό κµ¬μ΅°λ¥Ό λ°ν™ν•  κ²ƒ.
ν†µκ³Ό κΈ°μ¤€:
- `π“ μ‹ν—λ¨λ“ λ°”λ΅ μ‹μ‘` λλ” `π“– ν•™μµλ¨λ“ λ°”λ΅ μ‹μ‘` ν΄λ¦­ μ‹
  - `st.session_state.exam_questions` μ— ν•­λ©μ΄ μ €μ¥λ  κ²ƒ.
  - `st.session_state.exam_started == True` λ° `exam_mode_entry_anchor`κ°€ ν•΄λ‹Ή λ¨λ“λ΅ μ„¤μ •λ  κ²ƒ.
- μ‹¤μ „ μ‹ν— νƒ­μ—μ„ μ΄μ–΄μ„ μ‹μ‘ λ°°λ„κ°€ λ…Έμ¶λ  κ²ƒ.

## 3) ν•™μµ λ¨λ“ κ³Όλ©/λ‹¨μ› + κ°λ³„ λ¬Έν•­ μμ • λ™μ‘
λ©ν‘: κ³Όλ©β†’λ‹¨μ› κ³„μΈµ UIμ—μ„ μ„ νƒν• λ²”μ„κ°€ λ¬Έμ  ν’€μ΄λ‚ μμ • λ™μ‘μ— λ°μλμ–΄μ•Ό ν•λ©°, κ°λ³„ λ¬Έν•­μ΄ μ •μƒμ μΌλ΅ μμ •λμ–΄μ•Ό ν•λ‹¤.  
μ΅°κ±΄:
- κ³Όλ©/λ‹¨μ› λ°μ΄ν„°κ°€ μλ” λ¬Έμ μ€ν–‰.
- `filter_questions_by_subject_unit_hierarchy()` μ™€ `update_question_by_id()` μ‹¤ν–‰ ν™κ²½.
ν†µκ³Ό κΈ°μ¤€:
- λ¶„κ³Ό λ‹¤μ¤‘ μ„ νƒ + λ¶„κ³Όλ³„ λ‹¨μ› μ„ νƒ μ΅°ν•©μΌλ΅ ν•„ν„° κ²°κ³Όκ°€ `q.subject`/`q.unit` μ΅°κ±΄μ— μ •ν™•ν μΌμΉν•  κ²ƒ.
- `λ¬Έν•­ κ°λ³„ μμ •`μ—μ„ κ³Όλ©/λ‹¨μ›/λ‚μ΄λ„/λ¬Έν•­/μ„ μ§€/μ •λ‹µ/ν•΄μ„¤/λ©”λ¨ μμ • ν›„ `λ¬Έν•­ μμ • μ €μ¥` ν΄λ¦­ μ‹
  - ν•΄λ‹Ή `id` ν•­λ©λ§ λ³€κ²½λκ³  IDκ°€ λ³€κ²½λμ§€ μ•μ•„μ•Ό ν•¨.

### μ‹¤ν–‰ λ…λ Ή
```bash
python -m unittest discover -s tests
```
